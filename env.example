# Phoenix RSS Environment Variables Template
# Copy this file to .env and update with your actual values
# This .env file has the HIGHEST priority and will override config.yaml

# =============================================================================
# Core Application Settings
# =============================================================================
SERVER_PORT=8080

# =============================================================================
# Database Configuration
# =============================================================================
POSTGRES_USER=postgres
POSTGRES_PASSWORD=password
POSTGRES_DB=phoenix_rss

# For services connection
DATABASE_HOST=postgres
DATABASE_PORT=5432
DATABASE_USER=postgres
DATABASE_PASSWORD=password
DATABASE_DBNAME=phoenix_rss
DATABASE_SSLMODE=disable

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_ADDRESS=redis:6379

# =============================================================================
# JWT Authentication
# =============================================================================
JWT_SECRET=your-jwt-secret-here

# =============================================================================
# Kafka Configuration
# =============================================================================
KAFKA_BROKERS=kafka:9092
KAFKA_FEED_FETCH_TOPIC=feed.fetch
KAFKA_FEED_FETCH_FEED_SERVICE_GROUP_ID=feed-service-group
KAFKA_ARTICLE_CHECK_TOPIC=articles.check
KAFKA_ARTICLE_CHECK_FEED_SERVICE_GROUP_ID=feed-service-article-checker
KAFKA_ARTICLES_NEW_TOPIC=articles.new
KAFKA_ARTICLES_PROCESSED_TOPIC=articles.processed
KAFKA_AI_SERVICE_GROUP_ID=ai-service-group
KAFKA_FEED_SERVICE_AI_GROUP_ID=feed-service-ai-group

# =============================================================================
# Service Addresses and Ports
# =============================================================================
USER_SERVICE_ADDRESS=user-service:50051
USER_SERVICE_PORT=50051
FEED_SERVICE_ADDRESS=feed-service:50053
FEED_SERVICE_PORT=50053
FEED_SERVICE_ARTICLE_UPDATE_HTTP_TIMEOUT=10s
FEED_SERVICE_ARTICLE_UPDATE_HTTP_USER_AGENT=PhoenixRSS/1.0 (+https://github.com/Fancu1/phoenix-rss)
FEED_SERVICE_ARTICLE_UPDATE_HTTP_RETRY_MAX_ATTEMPTS=3
FEED_SERVICE_ARTICLE_UPDATE_HTTP_RETRY_BACKOFF_INITIAL=500ms
FEED_SERVICE_ARTICLE_UPDATE_HTTP_RETRY_BACKOFF_MAX=10s
FEED_SERVICE_ARTICLE_UPDATE_HTTP_RETRY_JITTER=true
FEED_SERVICE_ARTICLE_UPDATE_ROBOTS_CACHE_TTL=12h
FEED_SERVICE_ARTICLE_UPDATE_RESPECT_ROBOTS=true
FEED_SERVICE_ARTICLE_UPDATE_MAX_CONTENT_BYTES=2097152

# =============================================================================
# Scheduler Service Configuration
# =============================================================================
SCHEDULER_SCHEDULE=@every 30m
SCHEDULER_BATCH_SIZE=20
SCHEDULER_BATCH_DELAY=5s
SCHEDULER_MAX_CONCURRENT=5
SCHEDULER_ARTICLE_CHECK_CRON=0 0 */4 * * *
SCHEDULER_ARTICLE_CHECK_WINDOW_DAYS=7
SCHEDULER_ARTICLE_CHECK_MIN_CHECK_INTERVAL=4h
SCHEDULER_ARTICLE_CHECK_PAGE_SIZE=500

# =============================================================================
# AI Service Configuration
# =============================================================================
AI_SERVICE_LLM_BASE_URL=https://api.openai.com
AI_SERVICE_LLM_API_KEY=your-api-key-here
AI_SERVICE_LLM_MODEL=gpt-4o-mini
AI_SERVICE_REQUEST_TIMEOUT=30s

# =============================================================================
# Logging
# =============================================================================
LOG_LEVEL=debug
